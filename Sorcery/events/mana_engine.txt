namespace = mana

character_event = {
    id = mana.2
    hide_window = yes
    
    trigger = {
		has_character_flag = mana_engine
	}
		
    mean_time_to_happen = {
        days = 365
					
    }
    immediate = {
        if = {
			limit = {
				check_variable = { which = "magic_power" value = 0 } 

				NOT = { 	
					check_variable = { which = "magic_power" which = "mana_max" } 
				}
			}
			character_event = { id = mana.201}  
        }
	}
}


	
character_event = {
    id = mana.201
    is_triggered_only = yes
	hide_window = yes

    immediate = {
        name = mana.201a
		if = {
			limit = { check_variable = { which = "magic_power" value = 0 }}                       
			change_variable = { which = "magic_power" which = "mana_gain" }
		}

	} 
}




character_event = {
    id = mana.997
    hide_window = yes
    
    trigger = { 
        trait = Sorcery
		not = { has_character_flag = manamaxstrong }
        }        

 
     
    mean_time_to_happen = {
        days = 1            
    }  
    immediate = {
        name = manastrong
        set_character_flag = manamaxstrong
        set_variable = { which = "mana_max" value = 50000 }
		set_variable = { which = "mana_gain" value = 5 }
    }
}


character_event = {
    id = mana.999
    hide_window = yes
    
    trigger = { 
        OR = {
            trait = Mentalist
            trait = War_Mage
            trait = Herbalist
        }
		not = { has_character_flag = manacostweak }
        }        

 
     
    mean_time_to_happen = {
        days = 1            
    }  
    immediate = {
        name = manaweak
        set_character_flag = manacostweak
        set_variable = { which = "mana_gain" value = 1 }
        set_variable = { which = "mana_max" value = 100 }		
    }
}


character_event = {
    id = mana.1000
    hide_window = yes
    
    trigger = { 
        OR = {
            trait = Sorcery
            trait = Mentalist
            trait = War_Mage
            trait = Herbalist
        }
		not = { has_character_flag = mana_engine }
        }        

 
     
    mean_time_to_happen = {
        days = 1            
    }  
    immediate = {
        name = mana_loc
        set_character_flag = mana_engine
        set_variable = { which = "magic_power" value = 0 }
    }
}



